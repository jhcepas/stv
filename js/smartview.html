<meta charset="utf-8">
<title>Two</title>
<body>
    <script src="./jquery.js"></script>
    <script src="./underscore-min.js"></script>
    <script src="./backbone-min.js"></script>
    <script src="./two.min.js"></script>

    <div id='main'></div>

    <script>

     function getRandomColor() {
         return 'rgb('
              + Math.floor(Math.random() * 255) + ','
              + Math.floor(Math.random() * 255) + ','
              + Math.floor(Math.random() * 255) + ')';
                   }


     var two;
     two = new Two({
         width: 1000,
         height: 1040,
         type: Two.Types.svg
         }).appendTo(document.body);

         //var circle = two.makeRectangle(0, 0, 10, 10);
         //circle.fill = "#881111";

     two.scene.scale = 1;
     two.scene.translation.set(0, 0);


     function draw(lines){
        var date = new Date();
         var t1 = date.getTime();
         console.log(t1-t0);
         for (i in lines){
             d = lines[i]
         var line = two.makeLine(d[0], d[1], d[2], d[3]);
         line.stroke =  getRandomColor();
         }
         var date = new Date();
         t2 = date.getTime();
         console.log(t2-t1);

         two.update();
         var date = new Date();
         console.log(date.getTime()-t2);

         console.log("Done", lines.length);
     }
     var date = new Date();
     var t0 = date.getTime();
     $.getJSON( "http://localhost:8090/get_region", function( data ) {
         console.log(data)
         draw(data["lines"]);
         });



    </script>
</body>

